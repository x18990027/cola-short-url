(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63c7d160"],{"1e8b":function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"TOKEN",prop:"token"}},[o("el-input",{staticStyle:{display:"inline-block"},attrs:{disabled:!0},model:{value:e.form.token,callback:function(t){e.$set(e.form,"token",t)},expression:"form.token"}}),o("el-button",{staticStyle:{display:"inline-block"},on:{click:e.handleRefresh}},[e._v("重置")])],1),o("el-form-item",{attrs:{label:"用户昵称",prop:"nickName"}},[o("el-input",{attrs:{maxlength:"30",clearable:""},model:{value:e.form.nickName,callback:function(t){e.$set(e.form,"nickName",t)},expression:"form.nickName"}})],1),o("el-form-item",{attrs:{label:"手机号码",prop:"phonenumber"}},[o("el-input",{attrs:{maxlength:"11",clearable:""},model:{value:e.form.phonenumber,callback:function(t){e.$set(e.form,"phonenumber",t)},expression:"form.phonenumber"}})],1),o("el-form-item",{attrs:{label:"密码",prop:"password"}},[o("el-input",{attrs:{placeholder:"请输入密码，留空不更改",maxlength:"11",clearable:""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),o("el-form-item",{attrs:{label:"QQ",prop:"qq"}},[o("el-input",{attrs:{maxlength:"50",clearable:""},model:{value:e.form.qq,callback:function(t){e.$set(e.form,"qq",t)},expression:"form.qq"}})],1),o("el-form-item",{attrs:{label:"默认缩短接口",prop:"domainId"}},[o("el-select",{attrs:{placeholder:"请选择"},on:{change:e.handleDomainChangeSelect},model:{value:e.form.defaultDomainId,callback:function(t){e.$set(e.form,"defaultDomainId",t)},expression:"form.defaultDomainId"}},e._l(e.form.domainList,(function(e){return o("el-option",{key:e.domainId,attrs:{label:e.domainName,value:e.domainId}})})),1)],1),o("el-form-item",{attrs:{label:"登陆短信",prop:"smsSwitch"}},[o("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.form.smsSwitch,callback:function(t){e.$set(e.form,"smsSwitch",t)},expression:"form.smsSwitch"}})],1),o("div",{staticStyle:{display:"inline-block",width:"60%"}},[o("el-form-item",{attrs:{label:"验证码",prop:"smsCode"}},[o("el-input",{attrs:{maxlength:"50"},model:{value:e.form.smsCode,callback:function(t){e.$set(e.form,"smsCode",t)},expression:"form.smsCode"}})],1)],1),o("div",{staticStyle:{display:"inline-block"}},[o("el-button",{attrs:{disabled:e.resetBtndisab},on:{click:e.openSms}},[e._v(" "+e._s(e.isSending?"已发送("+e.countdown+"s)":"发送验证码"))])],1),o("el-dialog",{attrs:{title:"发送验证码",visible:e.dialogVisible,width:"350px","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[e.captchaEnabled?o("el-form-item",{attrs:{prop:"code"}},[o("el-input",{staticStyle:{width:"60%"},attrs:{"auto-complete":"off",placeholder:"请输入检验码"},model:{value:e.registerForm.code,callback:function(t){e.$set(e.registerForm,"code",t)},expression:"registerForm.code"}},[o("svg-icon",{staticClass:"el-input__icon input-icon",attrs:{slot:"prefix","icon-class":"validCode"},slot:"prefix"})],1),o("div",{staticClass:"register-code"},[o("img",{staticClass:"register-code-img",attrs:{src:e.codeUrl},on:{click:e.getCode}})])],1):e._e(),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.send}},[e._v("确 定")])],1)],1),o("el-form-item",[o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submit}},[e._v("保存")]),o("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.close}},[e._v("关闭")])],1)],1)},i=[],s=o("c0c7"),a={props:{user:{type:Object}},data:function(){return{domainList:[],domainType:1,domainName:"",registerForm:{username:"",phone:"",qq:"",password:"",confirmPassword:"",code:"",uuid:""},captchaEnabled:!0,codeUrl:"",value:!1,isSending:!1,resetBtndisab:!1,countdown:0,countdownInterval:null,dialogVisible:!1,form:{},rules:{nickName:[{required:!0,message:"用户昵称不能为空",trigger:"blur"}],smsCode:[{required:!0,message:"短信验证码不能为空",trigger:"blur"}],phonenumber:[{required:!0,message:"手机号码不能为空",trigger:"blur"},{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}]}}},watch:{user:{handler:function(e){e&&(this.form={defaultDomainId:e.defaultDomainId,domainList:e.domainList,qq:e.qq,smsSwitch:e.smsSwitch,token:e.token,nickName:e.nickName,phonenumber:e.phonenumber,email:e.email,sex:e.sex})},immediate:!0}},methods:{handleDomainChangeSelect:function(e){this.form.domainId=e},handleClose:function(e){var t=this;this.$confirm("确认关闭？").then((function(o){t.registerForm.code=null,e()})).catch((function(e){}))},getCode:function(){var e=this;Object(s["o"])().then((function(t){e.codeUrl="data:image/gif;base64,"+t.img,e.registerForm.uuid=t.uuid}))},openSms:function(){this.getCode(),this.dialogVisible=!0},send:function(){var e=this;Object(s["p"])(this.registerForm).then((function(t){e.$modal.msgSuccess("发送成功"),e.dialogVisible=!1,e.isSending=!0,e.countdown=60,e.startCountdown(),e.resetBtndisab=!0})).catch((function(e){})),this.getCode()},startCountdown:function(){var e=this;this.countdownInterval&&clearInterval(this.countdownInterval),this.countdownInterval=setInterval((function(){e.countdown>0?e.countdown--:(clearInterval(e.countdownInterval),e.isSending=!1,e.countdown=0,e.resetBtndisab=!1)}),1e3)},handleRefresh:function(){var e=this;Object(s["l"])().then((function(t){e.form.token=t.data,e.$modal.msgSuccess("重置成功")}))},submit:function(){var e=this;this.$refs["form"].validate((function(t){t&&Object(s["r"])(e.form).then((function(t){e.user.phonenumber=e.form.phonenumber,e.user.email=e.form.email,e.user.token=e.form.token,e.user.qq=e.form.qq,e.user.smsSwitch=e.form.smsSwitch,e.$modal.msgSuccess("修改成功"),setTimeout((function(){window.location.reload()}),2e3)}))}))},close:function(){this.$tab.closePage()}}},r=a,l=(o("6436"),o("2877")),c=Object(l["a"])(r,n,i,!1,null,null,null);t["default"]=c.exports},"429a":function(e,t,o){},6436:function(e,t,o){"use strict";o("429a")}}]);